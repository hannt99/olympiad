#include "Bruno.h"
#include <bits/stdc++.h>
using namespace std;
using lint = long long;
using pi = array<int, 2>;
#define sz(v) ((int)(v).size())
#define all(v) (v).begin(), (v).end()

namespace {
int g[256] = {58, 3,  58, 46, 58, 47, 58, 28, 18, 3, 4,	 46, 18, 12, 36, 36, 9,	 51, 9,	 51, 9,	 47, 9,	 28, 18, 51, 4,	 51, 18, 12, 36, 36, 22, 22, 34, 38, 48, 48, 34, 38, 42, 30, 6,	 30, 42, 12, 7, 63, 14, 27, 43, 43, 23, 49, 23, 49, 31, 27, 43, 43, 31, 12, 15, 15, 59, 11, 67, 46, 59, 35, 24, 24, 59, 11, 67, 46, 59, 35, 24, 24, 10, 11, 26, 45, 10, 39, 26, 45, 10, 11, 55, 21, 10, 39, 0,	0,	22, 22, 34, 38, 48, 48, 34, 38, 68, 30, 6,	30, 56, 56, 71, 63, 14, 27, 26, 45, 64, 64, 26, 45, 68, 27, 55, 21, 57, 57, 57, 57,
			  20, 33, 2,  33, 54, 47, 2,  28, 52, 5, 50, 50, 52, 61, 50, 50, 20, 19, 62, 13, 54, 47, 70, 28, 52, 19, 16, 16, 52, 61, 16, 16, 41, 33, 41, 33, 8,	 8,	 8,	 8,	 42, 5,	 32, 32, 42, 61, 7, 63, 14, 19, 62, 13, 23, 49, 23, 49, 31, 19, 32, 32, 31, 61, 15, 15, 20, 37, 66, 37, 54, 35, 66, 60, 29, 29, 40, 40, 44, 35, 44, 60, 20, 53, 62, 13, 54, 39, 70, 60, 69, 53, 55, 21, 44, 39, 44, 60, 41, 37, 41, 37, 25, 1,	25, 1,	29, 29, 40, 40, 56, 56, 71, 63, 14, 53, 62, 13, 25, 17, 25, 17, 69, 53, 55, 21, 65, 17, 65, 17};
}

std::string Bruno(int N, std::vector<std::vector<int>> T) {
	int input = 0;
	for (int i = 0; i < 8; i++) {
		if (T[i][i])
			input |= (1 << i);
	}
	input = g[input];
	string ans;
	ans.resize(N);
	if (N == 43)
		ans[N - 1] = 'A';
	if (input >= 64)
		ans[N - 1] = 'B';
	int X = (input & 7);
	int Y = ((input >> 3) + X) % 8;
	int cnt = 0;
	for (int i = 0; i < 8; i++) {
		for (int j = 0; j < 8; j++) {
			if (i == X || j == Y || i == j)
				continue;
			if (cnt < sz(ans))
				ans[cnt++] = 'A' + T[i][j];
		}
	}
	return ans;
}